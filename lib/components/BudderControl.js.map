{"version":3,"sources":["../../src/components/BudderControl.js"],"names":["Card","CardDeck","BudderControl","React","Component","constructor","props","self","showTitle","cards","onChange","state","handleCardChange","bind","sendChangeUpward","newCards","data","id","change","out","setState","prevState","oldCards","oldCard","reduce","acc","card","cardClone","Object","assign","map","render","byPosition","a","b","natsort","position","sortedList","sort","compiledCardList","index","title","subtitle","hasProgress","progress"],"mappings":"AAAA,SAASA,IAAT,QAAqB,WAArB;AACA,SAASC,QAAT,QAAyB,eAAzB;;AAEA,OAAO,MAAMC,aAAN,SAA4BC,MAAMC,SAAlC,CAA2C;AACjDC,aAAYC,KAAZ,EAAkB;AACjB,QAAMA,KAAN;AACA,QAAMC,OAAO,IAAb;AACA,QAAM;AACLC,YADK;AAELC,QAFK;AAGLC;AAHK,MAIFJ,KAJJ;AAKAC,OAAKI,KAAL,GAAa;AACZH,cAAWA,aAAa,EADZ;AAEZC,UAAO,CAAC,GAAGA,KAAJ,KAAc;AAFT,GAAb;AAIAF,OAAKK,gBAAL,GAAwBL,KAAKK,gBAAL,CAAsBC,IAAtB,CAA2B,IAA3B,CAAxB;AACAN,OAAKO,gBAAL,GAAwBP,KAAKO,gBAAL,CAAsBD,IAAtB,CAA2B,IAA3B,CAAxB;AACA;AACDC,kBAAiBC,QAAjB,EAA0B;AACzB,MAAG,OAAO,KAAKT,KAAL,CAAWI,QAAlB,KAA+B,UAAlC,EAA6C;AAC5C,QAAKJ,KAAL,CAAWI,QAAX,CAAoBK,QAApB;AACA;AACD;AACDH,kBAAiBI,IAAjB,EAAsB;AACrB,QAAMT,OAAO,IAAb;;AAEA,QAAM,EAACU,EAAD,EAAKC,MAAL,KAAeF,IAArB;;AAEA,MAAIG,MAAM,EAAV;;AAEA,OAAKC,QAAL,CAAc,CAACC,SAAD,EAAYf,KAAZ,KAAoB;AACjC,SAAMgB,WAAWD,UAAUZ,KAA3B;AACA,SAAMc,UAAUD,SAASE,MAAT,CAAgB,CAACC,GAAD,EAAKC,IAAL,KAAY;AAC3C,QAAG,CAACD,GAAJ,EAAQ;AACP,SAAGC,KAAKT,EAAL,KAAYA,EAAf,EAAkB;AACjBQ,YAAMC,IAAN;AACA;AACD;AACD,WAAOD,GAAP;AACA,IAPe,EAOd,IAPc,CAAhB;;AASA,SAAME,YAAYC,OAAOC,MAAP,CAAc,EAAd,EAAkBN,OAAlB,EAA2BL,MAA3B,CAAlB;;AAEA,SAAMH,WAAWO,SAASQ,GAAT,CAAcP,OAAD,IAAW;AACxC,QAAGI,UAAUV,EAAV,KAAiBM,QAAQN,EAA5B,EAA+B;AAC9B,YAAOU,SAAP;AACA,KAFD,MAEK;AACJ,YAAOJ,OAAP;AACA;AACD,IANgB,CAAjB;;AAQAJ,SAAMJ,QAAN;;AAEA,UAAO;AACNN,WAAMM;AADA,IAAP;AAGA,GA1BD,EA0BE,MAAI;AACLR,QAAKO,gBAAL,CAAsBK,GAAtB;AACA,GA5BD;AA6BA;AACDY,UAAQ;;AAEP,QAAMC,aAAa,CAACC,CAAD,EAAGC,CAAH,KAASC,UAAUF,EAAEG,QAAZ,EAAqBF,EAAEE,QAAvB,CAA5B;AACA,QAAMC,aAAa,KAAK1B,KAAL,CAAWF,KAAX,CAAiB6B,IAAjB,CAAsBN,UAAtB,CAAnB;AACA,QAAMO,mBAAmBF,WAAWP,GAAX,CAAe,CAACJ,IAAD,EAAMc,KAAN,KACvC,oBAAC,IAAD;AACC,aAAUd,KAAKU,QADhB;AAEC,iBAAcI,KAFf;AAGC,QAAKd,KAAKT,EAHX;AAIC,UAAOS,KAAKT,EAJb;AAKC,UAAOS,KAAKe,KALb;AAMC,aAAUf,KAAKgB,QANhB;AAOC,gBAAahB,KAAKiB,WAPnB;AAQC,aAAUjB,KAAKkB,QARhB;AASC,aAAU,KAAKhC;AAThB,IADwB,CAAzB;;AAcA,SACC;AAAA;AAAA,KAAK,WAAU,gBAAf;AACC;AAAA;AAAA;AAAA;AAAA,IADD;AAEC;AAAA;AAAA,MAAK,WAAU,WAAf;AAA4B2B;AAA5B;AAFD,GADD;AAMA;AAlFgD","file":"BudderControl.js","sourcesContent":["import { Card } from \"./Card.js\"\nimport { CardDeck } from \"./CardDeck.js\";\n\nexport class BudderControl extends React.Component{\n\tconstructor(props){\n\t\tsuper(props)\n\t\tconst self = this\n\t\tconst {\n\t\t\tshowTitle,\n\t\t\tcards,\n\t\t\tonChange,\n\t\t} = props\n\t\tself.state = {\n\t\t\tshowTitle: showTitle || \"\",\n\t\t\tcards: [...cards] || [],\n\t\t}\n\t\tself.handleCardChange = self.handleCardChange.bind(this)\n\t\tself.sendChangeUpward = self.sendChangeUpward.bind(this)\n\t}\n\tsendChangeUpward(newCards){\n\t\tif(typeof this.props.onChange === \"function\"){\n\t\t\tthis.props.onChange(newCards)\n\t\t}\n\t}\n\thandleCardChange(data){\n\t\tconst self = this\n\n\t\tconst {id, change} = data\n\n\t\tlet out = []\n\n\t\tthis.setState((prevState, props)=>{\n\t\t\tconst oldCards = prevState.cards\n\t\t\tconst oldCard = oldCards.reduce((acc,card)=>{\n\t\t\t\tif(!acc){\n\t\t\t\t\tif(card.id === id){\n\t\t\t\t\t\tacc = card\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn acc\n\t\t\t},null)\n\n\t\t\tconst cardClone = Object.assign({}, oldCard, change)\n\t\n\t\t\tconst newCards = oldCards.map((oldCard)=>{\n\t\t\t\tif(cardClone.id === oldCard.id){\n\t\t\t\t\treturn cardClone\n\t\t\t\t}else{\n\t\t\t\t\treturn oldCard\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tout = newCards\n\n\t\t\treturn {\n\t\t\t\tcards:newCards\n\t\t\t}\n\t\t},()=>{\n\t\t\tself.sendChangeUpward(out)\n\t\t})\n\t}\n\trender(){\n\n\t\tconst byPosition = (a,b) => natsort()(a.position,b.position)\n\t\tconst sortedList = this.state.cards.sort(byPosition)\n\t\tconst compiledCardList = sortedList.map((card,index)=>(\n\t\t\t<Card \n\t\t\t\tposition={card.position}\n\t\t\t\tcurrentIndex={index}\n\t\t\t\tkey={card.id} \n\t\t\t\tident={card.id}\n\t\t\t\ttitle={card.title}\n\t\t\t\tsubtitle={card.subtitle} \n\t\t\t\thasProgress={card.hasProgress}\n\t\t\t\tprogress={card.progress}\n\t\t\t\tonChange={this.handleCardChange}\n\t\t\t\t/>\n\t\t))\n\t\t\n\t\treturn (\n\t\t\t<div className=\"budder-control\">\n\t\t\t\t<div>Budder</div>\n\t\t\t\t<div className=\"card-list\">{compiledCardList}</div>\n\t\t\t</div>\n\t\t)\n\t}\n}"]}